{{ define "main" }}

{{ if .IsHome }}
{{ $pag := .Paginate (where site.RegularPages "Type" "in" site.Params.mainSections) }}
{{ else }}
{{ $pag := .Paginator.Pages }}
{{ end }}

<article class="max-w-7xl mx-auto my-5 px-6">
    <article class="prose pb-2">
        <h1>{{ .Title }}</h1>

        {{ .Content }}
    </article>

    <div class="max-w-7xl mx-auto my-5">
        <div class="flex flex-wrap justify-left my-5">
            {{ range .Paginator.Pages }}
            <div class="w-96 h-60 shadow-sm bg-secondary text-secondary-content mx-2 my-2 rounded-2xl">
                <div class="p-4">
                    {{ partial "postmeta.html" . }}
                    <p class="line-clamp-3 text-justify">{{ .Summary }}</p>
                </div>
            </div>
            {{ end }}
        </div>
    </div>

    {{ if or (.Paginator.HasPrev) (.Paginator.HasNext) }}
    <ul class="pager">
        {{ if .Paginator.HasPrev }}
        <li class="previous">
            <a href="{{ .Permalink }}page/{{ .Paginator.Prev.PageNumber }}/">&larr; Newer</a>
        </li>
        {{ end }}
        {{ if .Paginator.HasNext }}
        <li class="next">
            <a href="{{ .Permalink }}page/{{ .Paginator.Next.PageNumber }}/">Older &rarr;</a>
        </li>
        {{ end }}
    </ul>
    {{ end }}
</article>
{{ end }}
